<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Suntricity Efficiency Indicator</title>
    <!-- Load React, Babel, and Tailwind CDN -->
    <script src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
    
    <style>
        @keyframes spin-slow {
            from { transform: rotate(0deg); }
            to { transform: rotate(360deg); }
        }
        .animate-spin-slow {
            animation: spin-slow 8s linear infinite;
        }
        /* Custom scrollbar */
        ::-webkit-scrollbar {
            width: 6px;
        }
        ::-webkit-scrollbar-track {
            background: transparent;
        }
        ::-webkit-scrollbar-thumb {
            background: #334155;
            border-radius: 10px;
        }
    </style>
</head>
<body>
    <div id="root"></div>

    <script type="text/babel">
        const { useState, useMemo } = React;

        // --- INTERNAL ICON DEFINITIONS ---
        const ICONS = {
            Zap: <path d="M13 2 3 14h9l-1 8 10-12h-9l1-8z"/>,
            Droplets: <path d="M7 16.3c2.2 0 4-1.8 4-4 0-3.3-4-6-4-6s-4 2.7-4 6c0 2.2 1.8 4 4 4zM17 14c1.1 0 2-.9 2-2 0-1.5-2-3-2-3s-2 1.5-2 3c0 1.1.9 2 2 2zM13 20c1.1 0 2-.9 2-2 0-1.5-2-3-2-3s-2 1.5-2 3c0 1.1.9 2 2 2z"/>,
            Sun: <><circle cx="12" cy="12" r="4"/><path d="M12 2v2M12 20v2M4.93 4.93l1.41 1.41M17.66 17.66l1.41 1.41M2 12h2M20 12h2M6.34 17.66l-1.41 1.41M19.07 4.93l-1.41 1.41"/></>,
            Moon: <path d="M12 3a6 6 0 0 0 9 9 9 9 0 1 1-9-9Z"/>,
            Info: <><circle cx="12" cy="12" r="10"/><path d="M12 16v-4M12 8h.01"/></>,
            Search: <><circle cx="11" cy="11" r="8"/><path d="m21 21-4.3-4.3"/></>,
            BarChart3: <path d="M3 3v18h18M18 17v-3M13 17V9M8 17v-1"/>,
            Map: <path d="M14.1 6 9 3.5 3 6v15l6-2.5 6 2.5 6-2.5V6zM9 3.5v15M15 6v15"/>,
            LayoutDashboard: <><rect width="7" height="9" x="3" y="3" rx="1"/><rect width="7" height="5" x="14" y="3" rx="1"/><rect width="7" height="9" x="14" y="12" rx="1"/><rect width="7" height="5" x="3" y="16" rx="1"/></>,
            FileText: <><path d="M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z"/><polyline points="14 2 14 8 20 8"/><line x1="16" x2="8" y1="13" y2="13"/><line x1="16" x2="8" y1="17" y2="17"/><line x1="10" x2="8" y1="9" y2="9"/></>,
            MousePointerClick: <><path d="m9 9 5 12 1.77-4.51L20.28 14.72 15 13.5l-6-4.5zM7.21 7.21l.01.01"/><path d="M11 2h2M2 11v2M22 11v2M11 22h2"/></>,
            MapPin: <><path d="M20 10c0 6-8 12-8 12s-8-6-8-12a8 8 0 0 1 16 0Z"/><circle cx="12" cy="10" r="3"/></>,
            Crosshair: <><circle cx="12" cy="12" r="10"/><line x1="22" x2="18" y1="12" y2="12"/><line x1="6" x2="2" y1="12" y2="12"/><line x1="12" x2="12" y1="6" y2="2"/><line x1="12" x2="12" y1="22" y2="18"/></>,
            ArrowLeft: <path d="m12 19-7-7 7-7M19 12H5"/>,
            Download: <><path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"/><polyline points="7 10 12 15 17 10"/><line x1="12" x2="12" y1="15" y2="3"/></>,
            TrendingUp: <><polyline points="22 7 13.5 15.5 8.5 10.5 2 17"/><polyline points="16 7 22 7 22 13"/></>,
            AlertTriangle: <><path d="m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3z"/><line x1="12" x2="12" y1="9" y2="13"/><line x1="12" x2="12.01" y1="17" y2="17"/></>,
            CheckCircle2: <><circle cx="12" cy="12" r="10"/><path d="m9 12 2 2 4-4"/></>,
            DollarSign: <><line x1="12" x2="12" y1="2" y2="22"/><path d="M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6"/></>,
            Calendar: <><rect width="18" height="18" x="3" y="4" rx="2" ry="2"/><line x1="16" x2="16" y1="2" y2="6"/><line x1="8" x2="8" y1="2" y2="6"/><line x1="3" x2="21" y1="10" y2="10"/></>
        };

        const Icon = ({ name, size = 24, className = "" }) => (
            <svg
                xmlns="http://www.w3.org/2000/svg"
                width={size}
                height={size}
                viewBox="0 0 24 24"
                fill="none"
                stroke="currentColor"
                strokeWidth="2"
                strokeLinecap="round"
                strokeLinejoin="round"
                className={className}
            >
                {ICONS[name]}
            </svg>
        );

        // --- CONSTANTS & DATA ---
        const STATUS_COLORS = { RED: '#ef4444', YELLOW: '#f59e0b', GREEN: '#22c55e', GREY: '#94a3b8' };

        const generateSchools = () => {
            const schools = [];
            for (let i = 0; i < 56; i++) {
                const isPrimary = Math.random() < 0.8;
                const type = isPrimary ? 'Primary' : 'High';
                let elecStatus = Math.random() < 0.4 ? 'RED' : (Math.random() < 0.7 ? 'YELLOW' : 'GREEN');
                let waterStatus = Math.random() < 0.5 ? 'RED' : (Math.random() < 0.8 ? 'YELLOW' : 'GREEN');
                schools.push({
                    id: `active-${i}`,
                    name: `${isPrimary ? 'Northcliff' : 'Johannesburg'} ${i + 1} ${type}`,
                    type,
                    active: true,
                    coords: { x: 10 + Math.random() * 80, y: 10 + Math.random() * 80 },
                    elecStatus,
                    waterStatus,
                    grade: elecStatus === 'GREEN' ? 'A' : (elecStatus === 'YELLOW' ? 'B-' : 'D+'),
                    consumption: {
                        elec: Math.floor(Math.random() * 5000) + 2000,
                        water: Math.floor(Math.random() * 1000) + 500,
                        monthlyHistory: Array.from({ length: 12 }, () => 30 + Math.random() * 60)
                    }
                });
            }
            for (let i = 0; i < 20; i++) {
                schools.push({
                    id: `inactive-${i}`,
                    name: `Facility #${i + 400} (Unregistered)`,
                    type: 'Secondary',
                    active: false,
                    coords: { x: 10 + Math.random() * 80, y: 10 + Math.random() * 80 },
                    elecStatus: 'GREY',
                    waterStatus: 'GREY'
                });
            }
            return schools;
        };

        const MOCK_SCHOOLS = generateSchools();

        // --- SUB-COMPONENTS ---
        const CustomPin = ({ color, isActive, isRed, onClick, onMouseEnter, onMouseLeave }) => (
            <div 
                className="relative cursor-pointer transition-transform duration-200 hover:scale-125 z-10 hover:z-40"
                onClick={onClick} onMouseEnter={onMouseEnter} onMouseLeave={onMouseLeave}
            >
                {isRed && (
                    <>
                        <div className="absolute inset-[-6px] rounded-full animate-ping opacity-[0.12]" style={{ backgroundColor: color }} />
                        <div className="absolute inset-[-3px] rounded-full animate-pulse opacity-[0.08] blur-sm" style={{ backgroundColor: color }} />
                    </>
                )}
                <svg width="24" height="30" viewBox="0 0 24 30" fill="none" xmlns="http://www.w3.org/2000/svg" className="drop-shadow-lg">
                    <path d="M12 0C5.37 0 0 5.37 0 12C0 21 12 30 12 30C12 30 24 21 24 12C24 5.37 18.63 0 12 0Z" fill={color} />
                    <circle cx="12" cy="12" r="5" fill="white" fillOpacity={isActive ? "0.85" : "0.3"} />
                </svg>
            </div>
        );

        const DetailedReport = ({ school, onBack, darkMode }) => (
            <div className="flex flex-col h-full overflow-hidden animate-in fade-in slide-in-from-bottom-4 duration-500">
                <div className="flex justify-between items-center mb-6 lg:mb-8 shrink-0">
                    <button onClick={onBack} className={`flex items-center gap-2 px-3 py-1.5 lg:px-4 lg:py-2 rounded-xl transition-all ${darkMode ? 'hover:bg-slate-800 text-slate-400' : 'hover:bg-slate-100 text-slate-600'}`}>
                        <Icon name="ArrowLeft" size={18} />
                        <span className="font-bold text-xs lg:text-sm uppercase tracking-wider">Back</span>
                    </button>
                    <button className="flex items-center gap-2 px-3 py-1.5 lg:px-4 lg:py-2 rounded-xl bg-orange-500 text-white font-bold text-xs lg:text-sm hover:bg-orange-600 transition-all shadow-lg shadow-orange-500/20">
                        <Icon name="Download" size={18} /> <span className="hidden sm:inline">Export PDF</span>
                    </button>
                </div>
                <div className="flex-1 grid grid-cols-12 gap-4 lg:gap-6 overflow-y-auto pr-2 pb-24 lg:pb-12">
                    <div className={`col-span-12 lg:col-span-4 p-6 lg:p-8 rounded-[2rem] lg:rounded-[2.5rem] border ${darkMode ? 'bg-slate-900 border-slate-800' : 'bg-white border-slate-200'}`}>
                        <div className="flex flex-col items-center text-center">
                            <div className={`w-20 h-20 lg:w-24 lg:h-24 rounded-3xl flex items-center justify-center mb-4 lg:mb-6 text-3xl lg:text-4xl font-black ${school.elecStatus === 'GREEN' ? 'text-green-500 bg-green-500/10' : school.elecStatus === 'YELLOW' ? 'text-amber-500 bg-amber-500/10' : 'text-red-500 bg-red-500/10'}`}>{school.grade}</div>
                            <h2 className="text-xl lg:text-2xl font-black mb-1">{school.name}</h2>
                            <span className="px-3 py-1 bg-slate-800 rounded-full text-[9px] lg:text-[10px] font-black uppercase text-slate-400 tracking-widest mb-6">{school.type} INSTITUTION</span>
                            <div className="w-full space-y-3">
                                <div className="flex justify-between p-4 rounded-2xl bg-slate-800/30 font-bold uppercase tracking-tighter text-[10px] lg:text-xs">
                                    <span className="text-slate-500">Efficiency Rank</span>
                                    <span>Top 15%</span>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div className={`col-span-12 lg:col-span-8 p-6 lg:p-8 rounded-[2rem] lg:rounded-[2.5rem] border ${darkMode ? 'bg-slate-900 border-slate-800' : 'bg-white border-slate-200'}`}>
                        <h3 className="text-[10px] lg:text-xs font-black uppercase tracking-widest text-slate-500 mb-6">Financial Impact</h3>
                        <div className="grid grid-cols-1 sm:grid-cols-3 gap-6">
                            <div className="space-y-2">
                                <p className="text-slate-500 text-[10px] font-bold uppercase">Total Spend (Annual)</p>
                                <p className="text-2xl lg:text-3xl font-black">R{((school.consumption.elec * 2.8) * 12).toLocaleString()}</p>
                            </div>
                            <div className="space-y-2">
                                <p className="text-slate-500 text-[10px] font-bold uppercase">Savings Goal</p>
                                <p className="text-2xl lg:text-3xl font-black text-green-500">R{(school.consumption.elec * 4).toLocaleString()}</p>
                            </div>
                            <div className="flex items-center justify-start sm:justify-center border-t sm:border-t-0 sm:border-l border-slate-800 pt-4 sm:pt-0 sm:pl-6 text-center">
                                <div className="flex items-center gap-4 sm:block">
                                    <div className="w-12 h-12 lg:w-16 lg:h-16 rounded-full border-4 border-orange-500 border-t-transparent animate-spin-slow flex items-center justify-center">
                                        <span className="text-[10px] font-bold">12%</span>
                                    </div>
                                    <p className="text-[9px] lg:text-[10px] font-bold text-slate-500 mt-2 uppercase">Wastage Gap</p>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div className={`col-span-12 p-6 lg:p-8 rounded-[2rem] lg:rounded-[2.5rem] border ${darkMode ? 'bg-slate-900 border-slate-800' : 'bg-white border-slate-200'}`}>
                        <h3 className="text-[10px] lg:text-xs font-black uppercase tracking-widest text-slate-500 mb-8">Consumption Trend</h3>
                        <div className="h-40 lg:h-48 flex items-end gap-1.5 lg:gap-2 px-2">
                            {school.consumption.monthlyHistory.map((val, idx) => (
                                <div key={idx} className="flex-1 flex flex-col items-center gap-2 group relative">
                                    <div className={`w-full rounded-t-lg transition-all duration-1000 ${school.elecStatus === 'RED' ? 'bg-red-500/60' : 'bg-orange-500/60'}`} style={{ height: `${val}%` }} />
                                    <span className="text-[8px] lg:text-[9px] font-bold text-slate-500 uppercase">{['J','F','M','A','M','J','J','A','S','O','N','D'][idx]}</span>
                                </div>
                            ))}
                        </div>
                    </div>
                </div>
            </div>
        );

        // --- MAIN APPLICATION ---
        const App = () => {
            const [darkMode, setDarkMode] = useState(true);
            const [mapType, setMapType] = useState('electricity');
            const [selectedSchool, setSelectedSchool] = useState(null);
            const [hoveredSchool, setHoveredSchool] = useState(null);
            const [view, setView] = useState('map');

            const activeStats = { total: 1152, active: 103, uploaded: 54 };

            return (
                <div className={`min-h-screen flex flex-col ${darkMode ? 'bg-slate-950 text-slate-100' : 'bg-slate-50 text-slate-900'} font-sans transition-colors duration-300`}>
                    
                    {/* Navigation: Sidebar (Desktop) / Bottom Bar (Mobile) */}
                    <aside className={`fixed z-50 flex border-slate-800 transition-all
                        bottom-0 left-0 w-full h-16 flex-row justify-around items-center px-4 border-t bg-slate-900/80 backdrop-blur-md
                        lg:top-0 lg:w-20 lg:h-full lg:flex-col lg:justify-start lg:py-8 lg:border-t-0 lg:border-r ${darkMode ? 'bg-slate-900 border-slate-800' : 'bg-white border-slate-200'}`}>
                        
                        <div className="hidden lg:flex lg:mb-12">
                            <div className="w-12 h-12 bg-orange-500 rounded-xl flex items-center justify-center shadow-lg"><Icon name="Sun" size={32} className="text-white" /></div>
                        </div>
                        
                        <nav className="flex flex-row lg:flex-col gap-6 sm:gap-10 lg:gap-8 lg:flex-1">
                            <button onClick={() => setView('map')} className={`p-2 lg:p-3 rounded-xl transition-all ${view === 'map' ? 'bg-orange-500/10 text-orange-500' : 'text-slate-400 hover:text-orange-500'}`}><Icon name="LayoutDashboard" size={24} /></button>
                            <button className="p-2 lg:p-3 text-slate-400 hover:text-orange-500 transition-colors"><Icon name="Map" size={24} /></button>
                            <button className="p-2 lg:p-3 text-slate-400 hover:text-orange-500 transition-colors"><Icon name="FileText" size={24} /></button>
                            <button className="p-2 lg:p-3 text-slate-400 hover:text-orange-500 transition-colors"><Icon name="BarChart3" size={24} /></button>
                        </nav>
                        
                        <button onClick={() => setDarkMode(!darkMode)} className={`p-2 lg:p-3 rounded-full transition-all group ${darkMode ? 'bg-slate-800 text-yellow-400' : 'bg-slate-200 text-slate-600'}`}>
                            {darkMode ? <Icon name="Sun" size={20} className="group-hover:rotate-45 transition-transform" /> : <Icon name="Moon" size={20} />}
                        </button>
                    </aside>

                    <main className="flex-1 flex flex-col h-screen overflow-hidden lg:pl-20">
                        {/* Header */}
                        <header className="px-4 lg:px-8 py-4 lg:py-6 flex justify-between items-center border-b border-slate-800/10 shrink-0">
                            <div>
                                <h1 className="text-lg lg:text-2xl font-bold tracking-tight uppercase tracking-widest leading-none">Efficiency</h1>
                                <p className="text-slate-500 text-[10px] lg:text-sm mt-1">Platform Status: <span className="text-orange-500 font-bold">{view === 'map' ? 'Global' : 'Audit'}</span></p>
                            </div>

                            {view === 'map' && (
                                <div className={`flex rounded-xl p-1 lg:p-1.5 ${darkMode ? 'bg-slate-900' : 'bg-slate-200'}`}>
                                    <button onClick={() => setMapType('electricity')} className={`flex items-center gap-1.5 px-3 py-1.5 lg:px-6 lg:py-2 rounded-lg transition-all ${mapType === 'electricity' ? 'bg-orange-500 text-white shadow-lg' : 'text-slate-500'}`}>
                                        <Icon name="Zap" size={14}/>
                                        <span className="font-bold text-[10px] lg:text-sm">Elec</span>
                                    </button>
                                    <button onClick={() => setMapType('water')} className={`flex items-center gap-1.5 px-3 py-1.5 lg:px-6 lg:py-2 rounded-lg transition-all ${mapType === 'water' ? 'bg-blue-600 text-white shadow-lg' : 'text-slate-500'}`}>
                                        <Icon name="Droplets" size={14}/>
                                        <span className="font-bold text-[10px] lg:text-sm">Water</span>
                                    </button>
                                </div>
                            )}
                        </header>

                        {/* Workspace */}
                        <div className="flex-1 p-4 lg:p-8 flex flex-col lg:grid lg:grid-cols-12 gap-4 lg:gap-8 overflow-hidden pb-20 lg:pb-8">
                            
                            {/* Map/Report Area */}
                            <div className="flex-[2] lg:col-span-9 h-full relative overflow-hidden">
                                {view === 'map' ? (
                                    <div className="h-full relative rounded-[1.5rem] lg:rounded-[2.5rem] overflow-hidden border border-slate-800/20 shadow-2xl bg-[#0f172a]">
                                        <div className={`absolute inset-0 transition-colors duration-500 ${darkMode ? 'bg-[#0f172a]' : 'bg-[#f1f5f9]'}`}>
                                            <div className="absolute inset-0 opacity-10 pointer-events-none" style={{ backgroundImage: 'linear-gradient(#64748b 1px, transparent 1px), linear-gradient(90deg, #64748b 1px, transparent 1px)', backgroundSize: '60px 60px' }} />
                                            <div className="absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 flex flex-col items-center opacity-20 pointer-events-none">
                                                <Icon name="Crosshair" size={32} className="text-slate-500" />
                                            </div>
                                            <div className="relative w-full h-full p-4">
                                                {MOCK_SCHOOLS.map(school => {
                                                    const statusKey = mapType === 'electricity' ? school.elecStatus : school.waterStatus;
                                                    return (
                                                        <div key={school.id} className="absolute transform -translate-x-1/2 -translate-y-full" style={{ left: `${school.coords.x}%`, top: `${school.coords.y}%` }}>
                                                            <CustomPin color={STATUS_COLORS[statusKey]} isActive={school.active} isRed={statusKey === 'RED'} onClick={() => setSelectedSchool(school)} onMouseEnter={() => setHoveredSchool(school)} onMouseLeave={() => setHoveredSchool(null)} />
                                                            {hoveredSchool?.id === school.id && (
                                                                <div className={`absolute bottom-[115%] left-1/2 -translate-x-1/2 mb-3 w-40 lg:w-56 p-2 lg:p-4 rounded-xl lg:rounded-2xl shadow-2xl border z-[100] backdrop-blur-md ${darkMode ? 'bg-slate-900/95 border-slate-700' : 'bg-white/95 border-slate-200'}`}>
                                                                    <p className="text-[8px] lg:text-[10px] font-black text-slate-500 uppercase mb-1 tracking-widest">{school.type}</p>
                                                                    <p className="text-[10px] lg:text-xs font-bold mb-2 lg:mb-3 truncate">{school.name}</p>
                                                                    {school.active ? <div className="flex justify-between items-center bg-slate-800/20 p-2 rounded-lg text-[8px] lg:text-[10px] font-bold uppercase text-slate-500">View Audit<Icon name="ArrowLeft" className="rotate-180" size={10} /></div> : <button className="w-full bg-orange-500 text-white text-[8px] lg:text-[10px] font-black py-1.5 rounded-lg">CLAIM</button>}
                                                                </div>
                                                            )}
                                                        </div>
                                                    );
                                                })}
                                            </div>
                                        </div>
                                        
                                        {/* Legend: Responsive positioning and scale */}
                                        <div className={`absolute bottom-4 left-4 lg:bottom-8 lg:left-8 p-3 lg:p-6 rounded-2xl lg:rounded-3xl border shadow-2xl z-50 transition-all ${darkMode ? 'bg-slate-900/90 border-slate-800' : 'bg-white/90 border-slate-200'} backdrop-blur-lg scale-90 lg:scale-100 origin-bottom-left`}>
                                            <h4 className="text-[8px] lg:text-[10px] font-black uppercase tracking-tighter text-slate-500 mb-2 lg:mb-4 text-center">Keys</h4>
                                            <div className="space-y-2 lg:space-y-3">
                                                <div className="flex items-center gap-2 lg:gap-3"><div className="relative"><div className="w-2 h-2 lg:w-3 lg:h-3 rounded-full bg-red-500" /><div className="absolute inset-0 rounded-full bg-red-500 animate-ping opacity-20" /></div><span className="text-[9px] lg:text-[11px] font-bold uppercase">Waste (RED)</span></div>
                                                <div className="flex items-center gap-2 lg:gap-3"><div className="w-2 h-2 lg:w-3 lg:h-3 rounded-full bg-amber-500" /><span className="text-[9px] lg:text-[11px] font-bold uppercase">Alert (YELLOW)</span></div>
                                                <div className="flex items-center gap-2 lg:gap-3"><div className="w-2 h-2 lg:w-3 lg:h-3 rounded-full bg-green-500" /><span className="text-[9px] lg:text-[11px] font-bold uppercase">Optimal (GREEN)</span></div>
                                                <hr className="border-slate-800/50" />
                                                <div className="flex items-center gap-2 lg:gap-3 opacity-60"><div className="w-2 h-2 lg:w-3 lg:h-3 rounded-full bg-slate-400" /><span className="text-[8px] lg:text-[11px] font-bold italic uppercase leading-none">NO DATA</span></div>
                                            </div>
                                        </div>
                                    </div>
                                ) : (
                                    <DetailedReport school={selectedSchool} onBack={() => setView('map')} darkMode={darkMode} />
                                )}
                            </div>

                            {/* Sidebar Area: Collapses/Stacks on Mobile */}
                            <div className={`flex-1 lg:col-span-3 flex flex-col gap-4 lg:gap-6 overflow-hidden transition-all ${view !== 'map' ? 'hidden lg:flex' : 'flex'}`}>
                                <div className={`p-4 lg:p-8 rounded-[1.5rem] lg:rounded-[2.5rem] border ${darkMode ? 'bg-slate-900/50 border-slate-800' : 'bg-white border-slate-200'}`}>
                                    <h3 className="font-black text-[10px] lg:text-xs uppercase tracking-widest text-slate-500 mb-4 lg:mb-6">Coverage</h3>
                                    <div className="flex items-baseline gap-2 mb-2 lg:mb-4">
                                        <span className="text-2xl lg:text-4xl font-black text-orange-500">{activeStats.active}</span>
                                        <span className="text-slate-500 text-[10px] lg:text-xs font-bold uppercase">/ {activeStats.total}</span>
                                    </div>
                                    <div className="w-full bg-slate-800 h-1.5 rounded-full overflow-hidden"><div className="bg-orange-500 h-full transition-all" style={{ width: `${(activeStats.active / activeStats.total) * 100}%` }} /></div>
                                </div>
                                
                                <div className={`flex-1 p-6 lg:p-8 rounded-[1.5rem] lg:rounded-[2.5rem] border transition-all overflow-y-auto ${selectedSchool ? (darkMode ? 'bg-slate-900 border-orange-500/30 shadow-xl' : 'bg-white border-orange-200 shadow-xl') : (darkMode ? 'bg-slate-900/20 border-slate-800' : 'bg-slate-100 border-slate-300')}`}>
                                    {selectedSchool ? (
                                        <div className="h-full flex flex-col">
                                            <div className="flex items-start gap-3 lg:gap-4 mb-6 lg:mb-8">
                                                <div className="w-10 h-10 lg:w-14 lg:h-14 rounded-xl lg:rounded-2xl bg-slate-800 flex items-center justify-center shrink-0 border border-slate-700">{selectedSchool.active ? <Icon name="Sun" className="text-orange-500" size={24} /> : <Icon name="MapPin" className="text-slate-500" size={24} />}</div>
                                                <div className="overflow-hidden"><h4 className="font-black text-sm lg:text-lg leading-tight truncate">{selectedSchool.name}</h4><p className="text-[8px] lg:text-[10px] text-slate-500 font-black uppercase mt-1 tracking-widest bg-slate-800 inline-block px-2 py-0.5 rounded-md">{selectedSchool.type}</p></div>
                                            </div>
                                            {selectedSchool.active ? (
                                                <div className="space-y-4 lg:space-y-6">
                                                    <div className="grid grid-cols-2 gap-2 lg:gap-3">
                                                        <div className="p-3 lg:p-4 rounded-xl lg:rounded-2xl bg-slate-800/50 border border-slate-700 text-center"><p className="text-[8px] font-black text-slate-500 uppercase mb-1">kWh</p><p className="font-black text-sm lg:text-lg">{selectedSchool.consumption.elec.toLocaleString()}</p></div>
                                                        <div className="p-3 lg:p-4 rounded-xl lg:rounded-2xl bg-slate-800/50 border border-slate-700 text-center"><p className="text-[8px] font-black text-slate-500 uppercase mb-1">kL</p><p className="font-black text-sm lg:text-lg">{selectedSchool.consumption.water.toLocaleString()}</p></div>
                                                    </div>
                                                    <div className="p-4 lg:p-5 rounded-2xl lg:rounded-3xl bg-orange-500/5 border border-orange-500/10"><h5 className="text-[9px] lg:text-[10px] font-black uppercase text-orange-500 mb-1">Rating: {selectedSchool.grade}</h5><p className="text-[9px] lg:text-xs text-slate-400 font-medium">Analysis is complete.</p></div>
                                                    <button onClick={() => setView('report')} className="w-full bg-orange-500 hover:bg-orange-600 text-white font-black py-3 lg:py-4 rounded-xl lg:rounded-2xl text-[10px] uppercase tracking-widest mt-auto shadow-lg shadow-orange-500/20">Audit Report</button>
                                                </div>
                                            ) : (
                                                <div className="flex-1 flex flex-col items-center justify-center text-center">
                                                    <div className="w-12 h-12 lg:w-16 lg:h-16 bg-slate-800/30 rounded-full flex items-center justify-center mb-4 lg:mb-6 border border-slate-700 border-dashed"><Icon name="Search" size={20} className="text-slate-600" /></div>
                                                    <button className="w-full bg-orange-500 text-white font-black py-3 lg:py-4 rounded-xl text-[10px] uppercase">CLAIM</button>
                                                </div>
                                            )}
                                        </div>
                                    ) : (
                                        <div className="h-full flex flex-col items-center justify-center text-center px-4"><Icon name="Map" size={20} className="text-slate-700 mb-2" /><p className="text-[9px] lg:text-[10px] text-slate-500 leading-relaxed uppercase font-bold tracking-tight">Select a pin to analyze.</p></div>
                                    )}
                                </div>
                            </div>
                        </div>
                    </main>
                </div>
            );
        };

        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<App />);
    </script>
</body>
</html>